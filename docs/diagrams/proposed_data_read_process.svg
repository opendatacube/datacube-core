<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="782px" preserveAspectRatio="none" style="width:1150px;height:782px;" version="1.1" viewBox="0 0 1150 782" width="1150px" zoomAndPan="magnify"><defs><filter height="300%" id="f1creq10tby6ae" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="253" x="449.75" y="22.9951">Proposed Data Reading Process</text><rect fill="#FFFFFF" filter="url(#f1creq10tby6ae)" height="529.125" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="312" y="147.7266"/><rect fill="#FFFFFF" filter="url(#f1creq10tby6ae)" height="385.0273" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="478" y="255.6914"/><rect fill="#FFFFFF" filter="url(#f1creq10tby6ae)" height="239.9297" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="682.5" y="364.6563"/><rect fill="#FFFFFF" filter="url(#f1creq10tby6ae)" height="210.7969" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="942" y="364.6563"/><rect fill="#FFFFFF" filter="url(#f1creq10tby6ae)" height="485.9922" style="stroke: #000000; stroke-width: 2.0;" width="875" x="264.5" y="162.7266"/><rect fill="#FFFFFF" filter="url(#f1creq10tby6ae)" height="296.1953" style="stroke: #000000; stroke-width: 2.0;" width="705" x="424.5" y="316.3906"/><rect fill="#BDE3FF" filter="url(#f1creq10tby6ae)" height="30.2969" style="stroke: #2980B9; stroke-width: 1.5;" width="95" x="638" y="333.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="645" y="353.5186">DataSource</text><rect fill="#BDE3FF" filter="url(#f1creq10tby6ae)" height="30.2969" style="stroke: #2980B9; stroke-width: 1.5;" width="99" x="895.5" y="378.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="902.5" y="398.8154">BandSource</text><rect fill="#FFFFFF" filter="url(#f1creq10tby6ae)" height="116.2031" style="stroke: #000000; stroke-width: 2.0;" width="234" x="885.5" y="431.1172"/><rect fill="#FFFFFF" height="56.9375" style="stroke: none; stroke-width: 1.0;" width="234" x="885.5" y="490.3828"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="27" x2="27" y1="116.5938" y2="694.8516"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="316.5" x2="316.5" y1="116.5938" y2="694.8516"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="482.5" x2="482.5" y1="116.5938" y2="694.8516"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="687" x2="687" y1="366.1719" y2="694.8516"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="946.5" x2="946.5" y1="411.4688" y2="694.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="113.292">User</text><ellipse cx="27" cy="43.2969" fill="#FEFECE" filter="url(#f1creq10tby6ae)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,51.2969 L27,78.2969 M14,59.2969 L40,59.2969 M27,78.2969 L14,93.2969 M27,78.2969 L40,93.2969 " fill="none" filter="url(#f1creq10tby6ae)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="706.8467">User</text><ellipse cx="27" cy="720.1484" fill="#FEFECE" filter="url(#f1creq10tby6ae)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,728.1484 L27,755.1484 M14,736.1484 L40,736.1484 M27,755.1484 L14,770.1484 M27,755.1484 L40,770.1484 " fill="none" filter="url(#f1creq10tby6ae)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#BDE3FF" filter="url(#f1creq10tby6ae)" height="30.2969" style="stroke: #2980B9; stroke-width: 1.5;" width="81" x="274.5" y="81.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="281.5" y="101.292">Datacube</text><rect fill="#BDE3FF" filter="url(#f1creq10tby6ae)" height="30.2969" style="stroke: #2980B9; stroke-width: 1.5;" width="81" x="274.5" y="693.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="281.5" y="713.8467">Datacube</text><rect fill="#BDE3FF" filter="url(#f1creq10tby6ae)" height="30.2969" style="stroke: #2980B9; stroke-width: 1.5;" width="93" x="434.5" y="81.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="441.5" y="101.292">DataLoader</text><rect fill="#BDE3FF" filter="url(#f1creq10tby6ae)" height="30.2969" style="stroke: #2980B9; stroke-width: 1.5;" width="93" x="434.5" y="693.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="441.5" y="713.8467">DataLoader</text><rect fill="#BDE3FF" filter="url(#f1creq10tby6ae)" height="30.2969" style="stroke: #2980B9; stroke-width: 1.5;" width="95" x="638" y="693.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="645" y="713.8467">DataSource</text><rect fill="#BDE3FF" filter="url(#f1creq10tby6ae)" height="30.2969" style="stroke: #2980B9; stroke-width: 1.5;" width="99" x="895.5" y="693.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="902.5" y="713.8467">BandSource</text><rect fill="#FFFFFF" filter="url(#f1creq10tby6ae)" height="529.125" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="312" y="147.7266"/><rect fill="#FFFFFF" filter="url(#f1creq10tby6ae)" height="385.0273" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="478" y="255.6914"/><rect fill="#FFFFFF" filter="url(#f1creq10tby6ae)" height="239.9297" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="682.5" y="364.6563"/><rect fill="#FFFFFF" filter="url(#f1creq10tby6ae)" height="210.7969" style="stroke: #2980B9; stroke-width: 1.0;" width="10" x="942" y="364.6563"/><polygon fill="#2980B9" points="300,143.7266,310,147.7266,300,151.7266,304,147.7266" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="27" x2="306" y1="147.7266" y2="147.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="34" y="142.6606">Requests some data using dc.load_data()</text><path d="M264.5,162.7266 L341.5,162.7266 L341.5,169.7266 L331.5,179.7266 L264.5,179.7266 L264.5,162.7266 " fill="#BDE3FF" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="485.9922" style="stroke: #000000; stroke-width: 2.0;" width="875" x="264.5" y="162.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="279.5" y="175.7935">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="258" x="356.5" y="174.937">[for each time/irregular dimension slice]</text><line style="stroke: #2980B9; stroke-width: 1.0;" x1="322" x2="364" y1="200.9922" y2="200.9922"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="364" x2="364" y1="200.9922" y2="213.9922"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="323" x2="364" y1="213.9922" y2="213.9922"/><polygon fill="#2980B9" points="333,209.9922,323,213.9922,333,217.9922,329,213.9922" style="stroke: #2980B9; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="329" y="195.9263">_fuse_measurement()</text><polygon fill="#2980B9" points="466,251.6914,476,255.6914,466,259.6914,470,255.6914" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="322" x2="472" y1="255.6914" y2="255.6914"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="329" y="250.6255">reproject_and_fuse()</text><path d="M493,226.9922 L493,266.9922 L860,266.9922 L860,236.9922 L850,226.9922 L493,226.9922 " fill="#F1FFFF" filter="url(#f1creq10tby6ae)" style="stroke: #2980B9; stroke-width: 1.0;"/><path d="M850,226.9922 L850,236.9922 L860,236.9922 L850,226.9922 " fill="#F1FFFF" style="stroke: #2980B9; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="499" y="244.0591">DataLoader is not currently a class, it is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="499" y="259.1919">functions in the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="601" y="259.1919">datacube.storage.storage</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="797" y="259.1919">module</text><polygon fill="#F1FFFF" filter="url(#f1creq10tby6ae)" points="375,281.2578,591,281.2578,601,292.2578,591,304.2578,375,304.2578,365,292.2578,375,281.2578" style="stroke: #2980B9; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="377" y="297.3247">create a destination array in RAM</text><path d="M424.5,316.3906 L501.5,316.3906 L501.5,323.3906 L491.5,333.3906 L424.5,333.3906 L424.5,316.3906 " fill="#BDE3FF" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="296.1953" style="stroke: #000000; stroke-width: 2.0;" width="705" x="424.5" y="316.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="439.5" y="329.4575">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="141" x="516.5" y="328.6011">[for each DataSource]</text><polygon fill="#2980B9" points="626,350.6563,636,354.6563,626,358.6563,630,354.6563" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="488" x2="632" y1="354.6563" y2="354.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="495" y="349.5903">read_from_source()</text><rect fill="#BDE3FF" filter="url(#f1creq10tby6ae)" height="30.2969" style="stroke: #2980B9; stroke-width: 1.5;" width="95" x="638" y="333.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="645" y="353.5186">DataSource</text><polygon fill="#2980B9" points="878.5,395.9531,888.5,399.9531,878.5,403.9531,882.5,399.9531" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="692.5" x2="884.5" y1="399.9531" y2="399.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="699.5" y="394.8872">open() returns BandSource</text><rect fill="#BDE3FF" filter="url(#f1creq10tby6ae)" height="30.2969" style="stroke: #2980B9; stroke-width: 1.5;" width="99" x="895.5" y="378.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="902.5" y="398.8154">BandSource</text><path d="M885.5,431.1172 L949.5,431.1172 L949.5,438.1172 L939.5,448.1172 L885.5,448.1172 L885.5,431.1172 " fill="#BDE3FF" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="116.2031" style="stroke: #000000; stroke-width: 2.0;" width="234" x="885.5" y="431.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="900.5" y="444.1841">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="150" x="964.5" y="443.3276">[Non reprojecting read]</text><line style="stroke: #2980B9; stroke-width: 1.0;" x1="952" x2="994" y1="469.3828" y2="469.3828"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="994" x2="994" y1="469.3828" y2="482.3828"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="953" x2="994" y1="482.3828" y2="482.3828"/><polygon fill="#2980B9" points="963,478.3828,953,482.3828,963,486.3828,959,482.3828" style="stroke: #2980B9; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="959" y="464.3169">_read_native()</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="885.5" x2="1119.5" y1="491.3828" y2="491.3828"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="890.5" y="501.5933">[ReProjecting read]</text><line style="stroke: #2980B9; stroke-width: 1.0;" x1="952" x2="994" y1="526.3203" y2="526.3203"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="994" x2="994" y1="526.3203" y2="539.3203"/><line style="stroke: #2980B9; stroke-width: 1.0;" x1="953" x2="994" y1="539.3203" y2="539.3203"/><polygon fill="#2980B9" points="963,535.3203,953,539.3203,963,543.3203,959,539.3203" style="stroke: #2980B9; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="959" y="521.2544">reproject()</text><polygon fill="#2980B9" points="703.5,571.4531,693.5,575.4531,703.5,579.4531,699.5,575.4531" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="697.5" x2="946" y1="575.4531" y2="575.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="709.5" y="570.3872">append data into destination array</text><polygon fill="#2980B9" points="499,600.5859,489,604.5859,499,608.5859,495,604.5859" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="493" x2="686.5" y1="604.5859" y2="604.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="505" y="599.52">return destination array</text><polygon fill="#2980B9" points="333,636.7188,323,640.7188,333,644.7188,329,640.7188" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="327" x2="482" y1="640.7188" y2="640.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="339" y="635.6528">return data</text><polygon fill="#2980B9" points="38,672.8516,28,676.8516,38,680.8516,34,676.8516" style="stroke: #2980B9; stroke-width: 1.0;"/><line style="stroke: #2980B9; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="32" x2="316" y1="676.8516" y2="676.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="44" y="671.7856">return data</text><!--
@startuml

skinparam backgroundColor white

skinparam note {
    BackgroundColor #F1FFFF
    BorderColor #2980B9
}

skinparam activity {
    BackgroundColor #BDE3FF
    ArrowColor #2980B9
    BorderColor #2980B9
    StartColor #227BC6
    EndColor #227BC6
    BarColor #227BC6
}

skinparam sequence {
    ArrowColor  #2980B9
    DividerBackgroundColor  #BDE3FF
    GroupBackgroundColor    #BDE3FF
    LifeLineBackgroundColor white
    LifeLineBorderColor #2980B9
    ParticipantBackgroundColor  #BDE3FF
    ParticipantBorderColor  #2980B9
    BoxLineColor    #2980B9
    BoxBackgroundColor  #DDDDDD
}

skinparam actorBackgroundColor #FEFECE
skinparam actorBorderColor    #A80036

skinparam usecaseArrowColor   #A80036
skinparam usecaseBackgroundColor  #FEFECE
skinparam usecaseBorderColor  #A80036

skinparam classArrowColor #A80036
skinparam classBackgroundColor    #FEFECE
skinparam classBorderColor    #A80036

skinparam objectArrowColor    #A80036
skinparam objectBackgroundColor   #FEFECE
skinparam objectBorderColor   #A80036

skinparam packageBackgroundColor  #FEFECE
skinparam packageBorderColor  #A80036

skinparam stereotypeCBackgroundColor  #ADD1B2
skinparam stereotypeABackgroundColor  #A9DCDF
skinparam stereotypeIBackgroundColor  #B4A7E5
skinparam stereotypeEBackgroundColor  #EB937F

skinparam componentArrowColor #A80036
skinparam componentBackgroundColor    #FEFECE
skinparam componentBorderColor    #A80036
skinparam componentInterfaceBackgroundColor   #FEFECE
skinparam componentInterfaceBorderColor   #A80036

skinparam stateBackgroundColor #BDE3FF
skinparam stateBorderColor #2980B9
skinparam stateArrowColor #2980B9
skinparam stateStartColor black
skinparam stateEndColor   black

title Proposed Data Reading Process
actor User


User -> Datacube: Requests some data using dc.load_data()
activate Datacube

loop for each time/irregular dimension slice
  Datacube -> Datacube: _fuse_measurement()
  Datacube -> DataLoader:  reproject_and_fuse()
  note right
    DataLoader is not currently a class, it is 
    functions in the ""datacube.storage.storage"" module
  end note
  activate DataLoader
  hnote over DataLoader : create a destination array in RAM
  loop for each DataSource
    create DataSource
    DataLoader -> DataSource: read_from_source()
    activate DataSource

    create BandSource
    activate BandSource
    DataSource -> BandSource: open() returns BandSource
    alt Non reprojecting read
        BandSource -> BandSource: _read_native()
    else ReProjecting read
        BandSource -> BandSource: reproject()
    end
    BandSource - -> DataSource: append data into destination array
    deactivate BandSource
    DataSource - -> DataLoader: return destination array
    deactivate DataSource
  end
  DataLoader - -> Datacube: return data
  deactivate DataLoader

end

Datacube - -> User: return data
deactivate Datacube


@enduml

PlantUML version 1.2018.13(Tue Nov 27 04:11:51 AEDT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-post-Ubuntu-3ubuntu1
Operating System: Linux
OS Version: 5.4.0-1012-azure
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>
