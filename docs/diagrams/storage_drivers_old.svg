<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="681px" preserveAspectRatio="none" style="width:1494px;height:681px;" version="1.1" viewBox="0 0 1494 681" width="1494px" zoomAndPan="magnify"><defs><filter height="300%" id="f1o7bgn3or8oo9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster rasterio--><polygon fill="#FFFFFF" filter="url(#f1o7bgn3or8oo9)" points="29.95,275,97.95,275,104.95,297.2969,125.95,297.2969,125.95,374,29.95,374,29.95,275" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="29.95" x2="104.95" y1="297.2969" y2="297.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="33.95" y="289.9951">rasterio</text><!--cluster datacube.drivers--><polygon fill="#FFFFFF" filter="url(#f1o7bgn3or8oo9)" points="135.95,24,275.95,24,282.95,46.2969,832.95,46.2969,832.95,238,135.95,238,135.95,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="135.95" x2="282.95" y1="46.2969" y2="46.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="134" x="139.95" y="38.9951">datacube.drivers</text><!--cluster datacube.drivers.s3--><polygon fill="#FFFFFF" filter="url(#f1o7bgn3or8oo9)" points="149.95,262,313.95,262,320.95,284.2969,782.95,284.2969,782.95,669,149.95,669,149.95,262" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="149.95" x2="320.95" y1="284.2969" y2="284.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="158" x="153.95" y="276.9951">datacube.drivers.s3</text><!--cluster datacube.drivers.netcdf--><polygon fill="#FFFFFF" filter="url(#f1o7bgn3or8oo9)" points="991.95,557,1187.95,557,1194.95,579.2969,1197.95,579.2969,1197.95,656,991.95,656,991.95,557" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="991.95" x2="1194.95" y1="579.2969" y2="579.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="995.95" y="571.9951">datacube.drivers.netcdf</text><!--cluster datacube.storage.storage--><polygon fill="#FFFFFF" filter="url(#f1o7bgn3or8oo9)" points="856.95,30.5,1067.95,30.5,1074.95,52.7969,1472.95,52.7969,1472.95,533,856.95,533,856.95,30.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="856.95" x2="1074.95" y1="52.7969" y2="52.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="205" x="860.95" y="45.4951">datacube.storage.storage</text><!--class rasterio.Band--><rect fill="#FEFECE" filter="url(#f1o7bgn3or8oo9)" height="48" id="rasterio.Band" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="45.95" y="310"/><ellipse cx="60.95" cy="326" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M56.8719,321.7656 L56.8719,319.6094 L64.2625,319.6094 L64.2625,321.7656 L61.7938,321.7656 L61.7938,329.8438 L64.2625,329.8438 L64.2625,332 L56.8719,332 L56.8719,329.8438 L59.3406,329.8438 L59.3406,321.7656 L56.8719,321.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="32" x="74.95" y="330.1543">Band</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="46.95" x2="108.95" y1="342" y2="342"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="46.95" x2="108.95" y1="350" y2="350"/><!--class DataSource--><rect fill="#98FB98" filter="url(#f1o7bgn3or8oo9)" height="99.2188" id="DataSource" style="stroke: #A80036; stroke-width: 1.5;" width="447" x="369.45" y="91"/><rect fill="#98FB98" height="32" style="stroke: #A80036; stroke-width: 1.5;" width="447" x="369.45" y="91"/><ellipse cx="551.7" cy="107" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M551.8094,102.3438 L550.6531,107.4219 L552.9813,107.4219 L551.8094,102.3438 Z M550.325,100.1094 L553.3094,100.1094 L556.6688,112.5 L554.2156,112.5 L553.45,109.4375 L550.1688,109.4375 L549.4188,112.5 L546.9813,112.5 L550.325,100.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="572.2" y="111.1543">DataSource</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="370.45" x2="815.45" y1="123" y2="123"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="435" x="375.45" y="137.2104">Responsible for reading data for a single measurement for a single Dataset</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="370.45" x2="815.45" y1="143.8047" y2="143.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="375.45" y="158.0151">@contextmanager open()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="375.45" y="170.8198">get_transform()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="375.45" y="183.6245">get_bandnumber()</text><!--class Driver--><rect fill="#FFEBCD" filter="url(#f1o7bgn3or8oo9)" height="163.2422" id="Driver" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="151.95" y="59"/><rect fill="#FFEBCD" height="32" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="151.95" y="59"/><ellipse cx="220.7" cy="75" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M220.8094,70.3438 L219.6531,75.4219 L221.9813,75.4219 L220.8094,70.3438 Z M219.325,68.1094 L222.3094,68.1094 L225.6688,80.5 L223.2156,80.5 L222.45,77.4375 L219.1688,77.4375 L218.4188,80.5 L215.9813,80.5 L219.325,68.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="36" x="241.2" y="79.1543">Driver</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="152.95" x2="332.95" y1="91" y2="91"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="32" x="157.95" y="105.2104">name</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="157.95" y="118.0151">format</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="157.95" y="130.8198">uri_scheme</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="30" x="157.95" y="143.6245">index</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="191.95" y="143.6245">Needs to be removed</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="152.95" x2="332.95" y1="150.2188" y2="150.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="157.95" y="164.4292">requirements_satisfied()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="157.95" y="177.2339">write_dataset_to_storage()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="157.95" y="190.0386">as_uri()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="157.95" y="202.8433">_init_index()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="157.95" y="215.6479">get_datasource()</text><!--class S3Source--><rect fill="#FEFECE" filter="url(#f1o7bgn3or8oo9)" height="73.6094" id="S3Source" style="stroke: #A80036; stroke-width: 1.5;" width="217" x="549.45" y="437"/><ellipse cx="623.7" cy="453" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M626.6688,458.6406 Q626.0906,458.9375 625.45,459.0781 Q624.8094,459.2344 624.1063,459.2344 Q621.6063,459.2344 620.2781,457.5938 Q618.9656,455.9375 618.9656,452.8125 Q618.9656,449.6875 620.2781,448.0313 Q621.6063,446.375 624.1063,446.375 Q624.8094,446.375 625.45,446.5313 Q626.1063,446.6875 626.6688,446.9844 L626.6688,449.7031 Q626.0438,449.125 625.45,448.8594 Q624.8563,448.5781 624.2313,448.5781 Q622.8875,448.5781 622.2,449.6563 Q621.5125,450.7188 621.5125,452.8125 Q621.5125,454.9063 622.2,455.9844 Q622.8875,457.0469 624.2313,457.0469 Q624.8563,457.0469 625.45,456.7813 Q626.0438,456.5 626.6688,455.9219 L626.6688,458.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="644.2" y="457.1543">S3Source</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="550.45" x2="765.45" y1="469" y2="469"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="555.45" y="483.2104">Similar API to rasterio.Band</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="550.45" x2="765.45" y1="489.8047" y2="489.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="205" x="555.45" y="504.0151">read(indexes, window, write_shape)</text><!--class S3DS--><rect fill="#FEFECE" filter="url(#f1o7bgn3or8oo9)" height="73.6094" id="S3DS" style="stroke: #A80036; stroke-width: 1.5;" width="207" x="554.45" y="579"/><ellipse cx="637.2" cy="595" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M640.1688,600.6406 Q639.5906,600.9375 638.95,601.0781 Q638.3094,601.2344 637.6063,601.2344 Q635.1063,601.2344 633.7781,599.5938 Q632.4656,597.9375 632.4656,594.8125 Q632.4656,591.6875 633.7781,590.0313 Q635.1063,588.375 637.6063,588.375 Q638.3094,588.375 638.95,588.5313 Q639.6063,588.6875 640.1688,588.9844 L640.1688,591.7031 Q639.5438,591.125 638.95,590.8594 Q638.3563,590.5781 637.7313,590.5781 Q636.3875,590.5781 635.7,591.6563 Q635.0125,592.7188 635.0125,594.8125 Q635.0125,596.9063 635.7,597.9844 Q636.3875,599.0469 637.7313,599.0469 Q638.3563,599.0469 638.95,598.7813 Q639.5438,598.5 640.1688,597.9219 L640.1688,600.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="33" x="657.7" y="599.1543">S3DS</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="555.45" x2="760.45" y1="611" y2="611"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="555.45" x2="760.45" y1="619" y2="619"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="86" x="560.45" y="633.2104">__init__(parent)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="560.45" y="646.0151">read(indexes, window, out_shape)</text><!--class S3DataSource--><rect fill="#98FB98" filter="url(#f1o7bgn3or8oo9)" height="73.6094" id="S3DataSource" style="stroke: #A80036; stroke-width: 1.5;" width="312" x="445.95" y="297"/><rect fill="#98FB98" height="32" style="stroke: #A80036; stroke-width: 1.5;" width="312" x="445.95" y="297"/><ellipse cx="552.7" cy="313" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M555.6688,318.6406 Q555.0906,318.9375 554.45,319.0781 Q553.8094,319.2344 553.1063,319.2344 Q550.6063,319.2344 549.2781,317.5938 Q547.9656,315.9375 547.9656,312.8125 Q547.9656,309.6875 549.2781,308.0313 Q550.6063,306.375 553.1063,306.375 Q553.8094,306.375 554.45,306.5313 Q555.1063,306.6875 555.6688,306.9844 L555.6688,309.7031 Q555.0438,309.125 554.45,308.8594 Q553.8563,308.5781 553.2313,308.5781 Q551.8875,308.5781 551.2,309.6563 Q550.5125,310.7188 550.5125,312.8125 Q550.5125,314.9063 551.2,315.9844 Q551.8875,317.0469 553.2313,317.0469 Q553.8563,317.0469 554.45,316.7813 Q555.0438,316.5 555.6688,315.9219 L555.6688,318.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="573.2" y="317.1543">S3DataSource</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="446.95" x2="756.95" y1="329" y2="329"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="446.95" x2="756.95" y1="337" y2="337"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="451.95" y="351.2104">__init__(dataset, band_name, storage)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="300" x="451.95" y="364.0151">@contextmanager open() : OverrideBandDataSource</text><!--class S3Driver--><rect fill="#FFEBCD" filter="url(#f1o7bgn3or8oo9)" height="60.8047" id="S3Driver" style="stroke: #A80036; stroke-width: 1.5;" width="348" x="165.95" y="443.5"/><rect fill="#FFEBCD" height="32" style="stroke: #A80036; stroke-width: 1.5;" width="348" x="165.95" y="443.5"/><ellipse cx="309.7" cy="459.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M312.6688,465.1406 Q312.0906,465.4375 311.45,465.5781 Q310.8094,465.7344 310.1063,465.7344 Q307.6063,465.7344 306.2781,464.0938 Q304.9656,462.4375 304.9656,459.3125 Q304.9656,456.1875 306.2781,454.5313 Q307.6063,452.875 310.1063,452.875 Q310.8094,452.875 311.45,453.0313 Q312.1063,453.1875 312.6688,453.4844 L312.6688,456.2031 Q312.0438,455.625 311.45,455.3594 Q310.8563,455.0781 310.2313,455.0781 Q308.8875,455.0781 308.2,456.1563 Q307.5125,457.2188 307.5125,459.3125 Q307.5125,461.4063 308.2,462.4844 Q308.8875,463.5469 310.2313,463.5469 Q310.8563,463.5469 311.45,463.2813 Q312.0438,463 312.6688,462.4219 L312.6688,465.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="52" x="330.2" y="463.6543">S3Driver</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="166.95" x2="512.95" y1="475.5" y2="475.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="166.95" x2="512.95" y1="483.5" y2="483.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="336" x="171.95" y="497.7104">get_datasource(dataset, measurement_id) : S3DataSource</text><!--class NetCDFDriver--><rect fill="#FFEBCD" filter="url(#f1o7bgn3or8oo9)" height="48" id="NetCDFDriver" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="1037.95" y="592"/><rect fill="#FFEBCD" height="32" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="1037.95" y="592"/><ellipse cx="1052.95" cy="608" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1055.9188,613.6406 Q1055.3406,613.9375 1054.7,614.0781 Q1054.0594,614.2344 1053.3563,614.2344 Q1050.8563,614.2344 1049.5281,612.5938 Q1048.2156,610.9375 1048.2156,607.8125 Q1048.2156,604.6875 1049.5281,603.0313 Q1050.8563,601.375 1053.3563,601.375 Q1054.0594,601.375 1054.7,601.5313 Q1055.3563,601.6875 1055.9188,601.9844 L1055.9188,604.7031 Q1055.2938,604.125 1054.7,603.8594 Q1054.1063,603.5781 1053.4813,603.5781 Q1052.1375,603.5781 1051.45,604.6563 Q1050.7625,605.7188 1050.7625,607.8125 Q1050.7625,609.9063 1051.45,610.9844 Q1052.1375,612.0469 1053.4813,612.0469 Q1054.1063,612.0469 1054.7,611.7813 Q1055.2938,611.5 1055.9188,610.9219 L1055.9188,613.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="82" x="1066.95" y="612.1543">NetCDFDriver</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1038.95" x2="1150.95" y1="624" y2="624"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1038.95" x2="1150.95" y1="632" y2="632"/><!--class BandDataSource--><rect fill="#00FFFF" filter="url(#f1o7bgn3or8oo9)" height="124.8281" id="BandDataSource" style="stroke: #A80036; stroke-width: 1.5;" width="281" x="1175.45" y="78"/><rect fill="#00FFFF" height="32" style="stroke: #A80036; stroke-width: 1.5;" width="281" x="1175.45" y="78"/><ellipse cx="1258.7" cy="94" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1261.6688,99.6406 Q1261.0906,99.9375 1260.45,100.0781 Q1259.8094,100.2344 1259.1063,100.2344 Q1256.6063,100.2344 1255.2781,98.5938 Q1253.9656,96.9375 1253.9656,93.8125 Q1253.9656,90.6875 1255.2781,89.0313 Q1256.6063,87.375 1259.1063,87.375 Q1259.8094,87.375 1260.45,87.5313 Q1261.1063,87.6875 1261.6688,87.9844 L1261.6688,90.7031 Q1261.0438,90.125 1260.45,89.8594 Q1259.8563,89.5781 1259.2313,89.5781 Q1257.8875,89.5781 1257.2,90.6563 Q1256.5125,91.7188 1256.5125,93.8125 Q1256.5125,95.9063 1257.2,96.9844 Q1257.8875,98.0469 1259.2313,98.0469 Q1259.8563,98.0469 1260.45,97.7813 Q1261.0438,97.5 1261.6688,96.9219 L1261.6688,99.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="106" x="1279.2" y="98.1543">BandDataSource</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1176.45" x2="1455.45" y1="110" y2="110"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="269" x="1181.45" y="124.2104">Reads data from somewhere implementing the</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="1181.45" y="137.0151">rasterio.Band Interface</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="1176.45" x2="1455.45" y1="143.6094" y2="143.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="204" x="1181.45" y="157.8198">source : [rasterio.Band | S3Source]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="1185.45" y="170.6245"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="1181.45" y="183.4292">read()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="1181.45" y="196.2339">reproject()</text><!--class OverrideBandDataSource--><rect fill="#00FFFF" filter="url(#f1o7bgn3or8oo9)" height="150.4375" id="OverrideBandDataSource" style="stroke: #A80036; stroke-width: 1.5;" width="267" x="873.45" y="65.5"/><rect fill="#00FFFF" height="32" style="stroke: #A80036; stroke-width: 1.5;" width="267" x="873.45" y="65.5"/><ellipse cx="923.7" cy="81.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M926.6688,87.1406 Q926.0906,87.4375 925.45,87.5781 Q924.8094,87.7344 924.1063,87.7344 Q921.6063,87.7344 920.2781,86.0938 Q918.9656,84.4375 918.9656,81.3125 Q918.9656,78.1875 920.2781,76.5313 Q921.6063,74.875 924.1063,74.875 Q924.8094,74.875 925.45,75.0313 Q926.1063,75.1875 926.6688,75.4844 L926.6688,78.2031 Q926.0438,77.625 925.45,77.3594 Q924.8563,77.0781 924.2313,77.0781 Q922.8875,77.0781 922.2,78.1563 Q921.5125,79.2188 921.5125,81.3125 Q921.5125,83.4063 922.2,84.4844 Q922.8875,85.5469 924.2313,85.5469 Q924.8563,85.5469 925.45,85.2813 Q926.0438,85 926.6688,84.4219 L926.6688,87.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="158" x="944.2" y="85.6543">OverrideBandDataSource</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="874.45" x2="1139.45" y1="97.5" y2="97.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="255" x="879.45" y="111.7104">Allows reading data for a band, but uses the</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="250" x="879.45" y="124.5151">CRS/Transform/NoData values stored in the</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="211" x="879.45" y="137.3198">Dataset and retrieved from the index</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="874.45" x2="1139.45" y1="143.9141" y2="143.9141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="204" x="879.45" y="158.1245">source : [rasterio.Band | S3Source]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="883.45" y="170.9292"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="879.45" y="183.7339">read(window, out_shape)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="879.45" y="196.5386">reproject()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="883.45" y="209.3433"/><!--class RasterioDataSource--><rect fill="#98FB98" filter="url(#f1o7bgn3or8oo9)" height="73.6094" id="RasterioDataSource" style="stroke: #A80036; stroke-width: 1.5;" width="311" x="873.45" y="297"/><rect fill="#98FB98" height="32" style="stroke: #A80036; stroke-width: 1.5;" width="311" x="873.45" y="297"/><ellipse cx="962.2" cy="313" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M962.3094,308.3438 L961.1531,313.4219 L963.4813,313.4219 L962.3094,308.3438 Z M960.825,306.1094 L963.8094,306.1094 L967.1688,318.5 L964.7156,318.5 L963.95,315.4375 L960.6688,315.4375 L959.9188,318.5 L957.4813,318.5 L960.825,306.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="125" x="982.7" y="317.1543">RasterioDataSource</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="874.45" x2="1183.45" y1="329" y2="329"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="299" x="879.45" y="343.2104">Uses the rasterio library to read, and read/reproject</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="25" x="879.45" y="356.0151">data</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="874.45" x2="1183.45" y1="362.6094" y2="362.6094"/><!--class RasterFileDataSource--><rect fill="#98FB98" filter="url(#f1o7bgn3or8oo9)" height="86.4141" id="RasterFileDataSource" style="stroke: #A80036; stroke-width: 1.5;" width="210" x="872.95" y="431"/><rect fill="#98FB98" height="32" style="stroke: #A80036; stroke-width: 1.5;" width="210" x="872.95" y="431"/><ellipse cx="906.85" cy="447" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M909.8188,452.6406 Q909.2406,452.9375 908.6,453.0781 Q907.9594,453.2344 907.2563,453.2344 Q904.7563,453.2344 903.4281,451.5938 Q902.1156,449.9375 902.1156,446.8125 Q902.1156,443.6875 903.4281,442.0313 Q904.7563,440.375 907.2563,440.375 Q907.9594,440.375 908.6,440.5313 Q909.2563,440.6875 909.8188,440.9844 L909.8188,443.7031 Q909.1938,443.125 908.6,442.8594 Q908.0063,442.5781 907.3813,442.5781 Q906.0375,442.5781 905.35,443.6563 Q904.6625,444.7188 904.6625,446.8125 Q904.6625,448.9063 905.35,449.9844 Q906.0375,451.0469 907.3813,451.0469 Q908.0063,451.0469 908.6,450.7813 Q909.1938,450.5 909.8188,449.9219 L909.8188,452.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="136" x="925.05" y="451.1543">RasterFileDataSource</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="873.95" x2="1081.95" y1="463" y2="463"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="878.95" y="477.2104">Only used for testing!</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="873.95" x2="1081.95" y1="483.8047" y2="483.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="198" x="878.95" y="498.0151">__init__(filename, bandnumber, ...)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="882.95" y="510.8198"/><!--class RasterDatasetDataSource--><rect fill="#98FB98" filter="url(#f1o7bgn3or8oo9)" height="73.6094" id="RasterDatasetDataSource" style="stroke: #A80036; stroke-width: 1.5;" width="263" x="1118.45" y="437"/><rect fill="#98FB98" height="32" style="stroke: #A80036; stroke-width: 1.5;" width="263" x="1118.45" y="437"/><ellipse cx="1163.2" cy="453" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1166.1688,458.6406 Q1165.5906,458.9375 1164.95,459.0781 Q1164.3094,459.2344 1163.6063,459.2344 Q1161.1063,459.2344 1159.7781,457.5938 Q1158.4656,455.9375 1158.4656,452.8125 Q1158.4656,449.6875 1159.7781,448.0313 Q1161.1063,446.375 1163.6063,446.375 Q1164.3094,446.375 1164.95,446.5313 Q1165.6063,446.6875 1166.1688,446.9844 L1166.1688,449.7031 Q1165.5438,449.125 1164.95,448.8594 Q1164.3563,448.5781 1163.7313,448.5781 Q1162.3875,448.5781 1161.7,449.6563 Q1161.0125,450.7188 1161.0125,452.8125 Q1161.0125,454.9063 1161.7,455.9844 Q1162.3875,457.0469 1163.7313,457.0469 Q1164.3563,457.0469 1164.95,456.7813 Q1165.5438,456.5 1166.1688,455.9219 L1166.1688,458.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="165" x="1183.7" y="457.1543">RasterDatasetDataSource</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1119.45" x2="1380.45" y1="469" y2="469"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1119.45" x2="1380.45" y1="477" y2="477"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="1124.45" y="491.2104">__init__(dataset, measurement_id)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="251" x="1124.45" y="504.0151">@contextmanager open() : BandDataSource</text><!--link rasterio.Band to S3Source--><path d="M123.62,369.11 C132.04,374.13 141,378.7 149.95,382 C310.56,441.17 365.08,392.87 531.95,431 C539.59,432.75 547.42,434.77 555.27,436.97 " fill="none" id="rasterio.Band-S3Source" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="119.72,374.93,106.8,358.13,127.37,363.2,119.72,374.93" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Driver to NetCDFDriver--><path d="M329.22,234.01 C336.51,238.68 344.11,242.77 351.95,246 C374.08,255.14 764.15,239.16 782.95,254 C886.32,335.65 766.12,445.6 856.95,541 C904.09,590.52 983.7,607.1 1037.74,612.54 " fill="none" id="Driver-NetCDFDriver" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="324.93,239.55,312.79,222.18,333.11,228.18,324.93,239.55" style="stroke: #A80036; stroke-width: 1.0;"/><!--link DataSource to RasterioDataSource--><path d="M722.13,198.24 C794.83,230.17 883.44,269.09 946.7,296.88 " fill="none" id="DataSource-RasterioDataSource" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="719.03,204.52,703.53,190.07,724.66,191.7,719.03,204.52" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RasterioDataSource to RasterFileDataSource--><path d="M1008.54,390.21 C1003.57,403.67 998.32,417.86 993.61,430.62 " fill="none" id="RasterioDataSource-RasterFileDataSource" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1002.05,387.59,1015.55,371.26,1015.18,392.44,1002.05,387.59" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RasterioDataSource to RasterDatasetDataSource--><path d="M1103.69,381.67 C1132.56,399.7 1165.09,420.01 1192.12,436.89 " fill="none" id="RasterioDataSource-RasterDatasetDataSource" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1099.98,387.61,1086.72,371.08,1107.39,375.73,1099.98,387.61" style="stroke: #A80036; stroke-width: 1.0;"/><!--link S3Source to S3DS--><path d="M657.95,524.25 C657.95,542.14 657.95,562.01 657.95,578.58 " fill="none" id="S3Source-S3DS" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="657.95,511.05,653.95,517.05,657.95,523.05,661.95,517.05,657.95,511.05" style="stroke: #A80036; stroke-width: 1.0;"/><!--link DataSource to S3DataSource--><path d="M596.18,210.35 C597.56,239.65 599.11,272.6 600.25,296.97 " fill="none" id="DataSource-S3DataSource" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="589.19,210.63,595.24,190.32,603.17,209.97,589.19,210.63" style="stroke: #A80036; stroke-width: 1.0;"/><!--link S3DataSource to S3Source--><path d="M621.58,383.38 C628.73,401.01 636.69,420.61 643.33,436.98 " fill="none" id="S3DataSource-S3Source" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="616.66,371.26,615.209,378.3236,621.1712,382.3798,622.6222,375.3161,616.66,371.26" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Driver to S3Driver--><path d="M133.03,172.92 C93.42,190.13 52.87,215.97 29.95,254 C0.58,302.72 -4.15,336.46 29.95,382 C49.02,407.48 112.12,428.26 176.45,443.49 " fill="none" id="Driver-S3Driver" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="130.54,166.37,151.71,165.37,135.79,179.35,130.54,166.37" style="stroke: #A80036; stroke-width: 1.0;"/><!--link OverrideBandDataSource to S3DataSource--><path d="M890.14,215.55 C871.32,226.34 851.82,236.87 832.95,246 C797.83,262.98 758.49,278.89 722.36,292.33 " fill="none" id="OverrideBandDataSource-S3DataSource" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="709.72,296.99,716.7335,298.6665,720.9785,292.8373,713.965,291.1608,709.72,296.99" style="stroke: #A80036; stroke-width: 1.0;"/><!--link OverrideBandDataSource to RasterioDataSource--><path d="M1015.45,215.54 C1018.08,238.42 1020.91,263.04 1023.29,283.81 " fill="none" id="OverrideBandDataSource-RasterioDataSource" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1024.79,296.84,1028.078,290.4222,1023.4185,284.9186,1020.1305,291.3365,1024.79,296.84" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="997.9115" y="285.9985">0..1</text><!--link BandDataSource to RasterioDataSource--><path d="M1223.56,203.15 C1181.35,231.31 1132.36,264 1094.09,289.54 " fill="none" id="BandDataSource-RasterioDataSource" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1083.08,296.88,1090.2911,296.8778,1093.0626,290.2206,1085.8515,290.2228,1083.08,296.88" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="1066.5844" y="286.0456">0..1</text><!--link RasterDatasetDataSource to NetCDFDriver--><path d="M1210.03,511.05 C1185.38,533.31 1154.05,561.62 1130.3,583.07 " fill="none" id="RasterDatasetDataSource-NetCDFDriver" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1120.63,591.8,1127.7635,590.7448,1129.5331,583.7542,1122.3996,584.8094,1120.63,591.8" style="stroke: #A80036; stroke-width: 1.0;"/><!--link S3DataSource to S3Driver--><path d="M533.45,371.08 C494.7,391.49 446.43,416.92 407.79,437.27 " fill="none" id="S3DataSource-S3Driver" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="396.12,443.41,403.2927,444.153,406.7373,437.8178,399.5646,437.0748,396.12,443.41" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

interface rasterio.Band

package datacube.drivers {
    abstract DataSource #PaleGreen {
        Responsible for reading data for a single measurement for a single Dataset
        @contextmanager open()
        get_transform()
        get_bandnumber()
    }
    abstract Driver #BlanchedAlmond {
        name
        format
        uri_scheme
        index **Needs to be removed**
        requirements_satisfied()
        write_dataset_to_storage()
        as_uri()
        _init_index()
        get_datasource()
    }
}

package datacube.drivers.s3 {
    class S3Source {
        Similar API to rasterio.Band

        read(indexes, window, write_shape)
    }
    class S3DS {
        __init__(parent)
        read(indexes, window, out_shape)

    }
    class S3DataSource #PaleGreen {
        __init__(dataset, band_name, storage)
        @contextmanager open() : OverrideBandDataSource

    }
    class S3Driver #BlanchedAlmond {
        get_datasource(dataset, measurement_id) : S3DataSource

    }
}

rasterio.Band <|.. S3Source 

package datacube.drivers.netcdf {
    class NetCDFDriver #BlanchedAlmond {

    }
    Driver <|- - NetCDFDriver
}

package datacube.storage.storage {

    class BandDataSource #Cyan {
        Reads data from somewhere implementing the
        rasterio.Band Interface
        ..
        source : [rasterio.Band | S3Source]

        read()
        reproject()
    }
    class OverrideBandDataSource #Cyan {
        Allows reading data for a band, but uses the 
        CRS/Transform/NoData values stored in the
        Dataset and retrieved from the index
        ..
        source : [rasterio.Band | S3Source]

        read(window, out_shape)
        reproject()

    }

    abstract RasterioDataSource #PaleGreen {
        Uses the rasterio library to read, and read/reproject
        data

    }
    DataSource <|- - RasterioDataSource
    class RasterFileDataSource #PaleGreen {
        Only used for testing!
        ..
        __init__(filename, bandnumber, ...)

    }
    RasterioDataSource <|- - RasterFileDataSource
    class RasterDatasetDataSource #PaleGreen {
        __init__(dataset, measurement_id)
        @contextmanager open() : BandDataSource

    }
    RasterioDataSource <|- - RasterDatasetDataSource
}
S3Source *- - S3DS
DataSource <|- - S3DataSource
S3DataSource *- - S3Source
Driver <|- - S3Driver

OverrideBandDataSource - -o S3DataSource
OverrideBandDataSource - -o "0..1" RasterioDataSource
BandDataSource - -o "0..1" RasterioDataSource

RasterDatasetDataSource - -o NetCDFDriver
S3DataSource - -o S3Driver
@enduml

PlantUML version 1.2018.13(Tue Nov 27 04:11:51 AEDT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-post-Ubuntu-3ubuntu1
Operating System: Linux
OS Version: 5.4.0-1012-azure
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>
